// ğŸ¯ KHAKISHOP ì¹´í…Œê³ ë¦¬ ì •ì˜ (í™ˆí˜ì´ì§€ êµ¬ì¡°ì— ë§ì¶¤)
// ì—…ë°ì´íŠ¸: activateCategories.map ì—ëŸ¬ í•´ê²°

export interface CategoryInfo {
  key: string;
  name: string;
  icon: string;
  description: string;
  isActive: boolean;
  hasSubcategories?: boolean;
  subcategories?: string[];
  displayOrder: number;
}

// ğŸ—ï¸ ë§ˆìŠ¤í„° ì¹´í…Œê³ ë¦¬ ëª©ë¡ (í™ˆí˜ì´ì§€ ë©”ë‰´ êµ¬ì¡° ê¸°ë°˜)
export const MASTER_CATEGORIES = [
  'hero', // ë©”ì¸ íˆì–´ë¡œ ì´ë¯¸ì§€
  'landing', // ëœë”© í˜ì´ì§€ ì´ë¯¸ì§€
  'projects', // OUR PROJECTS í˜ì´ì§€ìš©
  'references', // REFERENCES í˜ì´ì§€ìš©
  'curtain', // ê°œë³„ ì»¤íŠ¼ í˜ì´ì§€ìš©
  'blind', // ê°œë³„ ë¸”ë¼ì¸ë“œ í˜ì´ì§€ìš©
  'motorized', // ê°œë³„ ì „ë™ì‹œìŠ¤í…œ í˜ì´ì§€ìš©
  'collection', // ë‹¨ì¼ ì»¬ë ‰ì…˜ í˜ì´ì§€ìš© (í•˜ìœ„ë¶„ë¥˜ ì œê±°)
  'about', // íšŒì‚¬ ì†Œê°œ í˜ì´ì§€ìš©
  'contact', // ì—°ë½ì²˜ í˜ì´ì§€ìš©
  'gallery', // ê°¤ëŸ¬ë¦¬ í˜ì´ì§€ìš©
];

// ğŸ¨ ì¹´í…Œê³ ë¦¬ ìƒì„¸ ì •ë³´
export const categories: Record<string, CategoryInfo> = {
  hero: {
    key: 'hero',
    name: 'ë©”ì¸ íˆì–´ë¡œ',
    icon: 'ğŸŒŸ',
    description: 'í™ˆí˜ì´ì§€ ë©”ì¸ ë°°ë„ˆ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 1,
  },
  landing: {
    key: 'landing',
    name: 'ëœë”© í˜ì´ì§€',
    icon: 'ğŸ ',
    description: 'ëœë”© í˜ì´ì§€ ì„¹ì…˜ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 2,
  },
  projects: {
    key: 'projects',
    name: 'OUR PROJECTS',
    icon: 'ğŸ—ï¸',
    description: 'ì‹œê³µ ì‚¬ë¡€ í”„ë¡œì íŠ¸ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 3,
  },
  references: {
    key: 'references',
    name: 'REFERENCES',
    icon: 'ğŸ¢',
    description: 'ë ˆí¼ëŸ°ìŠ¤ í¬íŠ¸í´ë¦¬ì˜¤ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 4,
  },
  curtain: {
    key: 'curtain',
    name: 'CURTAIN',
    icon: 'ğŸªŸ',
    description: 'ì»¤íŠ¼ ì œí’ˆ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 5,
  },
  blind: {
    key: 'blind',
    name: 'BLIND',
    icon: 'ğŸšï¸',
    description: 'ë¸”ë¼ì¸ë“œ ì œí’ˆ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 6,
  },
  motorized: {
    key: 'motorized',
    name: 'MOTORIZED',
    icon: 'âš™ï¸',
    description: 'ì „ë™ì‹œìŠ¤í…œ ì œí’ˆ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 7,
  },
  collection: {
    key: 'collection',
    name: 'COLLECTION',
    icon: 'ğŸ¨',
    description: 'ì»¬ë ‰ì…˜ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false, // âœ… í•˜ìœ„ë¶„ë¥˜ ì œê±°ë¡œ ì´ë¯¸ì§€ í‘œì‹œ í™œì„±í™”
    displayOrder: 8,
  },
  about: {
    key: 'about',
    name: 'ABOUT',
    icon: 'ğŸ‘¥',
    description: 'íšŒì‚¬ ì†Œê°œ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 9,
  },
  contact: {
    key: 'contact',
    name: 'CONTACT',
    icon: 'ğŸ“',
    description: 'ì—°ë½ì²˜ í˜ì´ì§€ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 10,
  },
  gallery: {
    key: 'gallery',
    name: 'GALLERY',
    icon: 'ğŸ–¼ï¸',
    description: 'ê°¤ëŸ¬ë¦¬ ì´ë¯¸ì§€',
    isActive: true,
    hasSubcategories: false,
    displayOrder: 11,
  },
};

// ğŸ”„ í•˜ìœ„ ì¹´í…Œê³ ë¦¬ ì œê±° (ì´ë¯¸ì§€ í‘œì‹œ ë¬¸ì œ í•´ê²°)
const subcategories: Record<string, string[]> = {
  // âŒ ì œê±°ëœ í•˜ìœ„ë¶„ë¥˜ë“¤ (ì´ë¯¸ì§€ ë Œë”ë§ ì°¨ë‹¨ ì›ì¸)
  // collections: ['modern', 'classic', 'premium']
  // products: ['curtain', 'blind', 'motorized']
};

// ğŸ“„ í˜ì´ì§€ë³„ ì¹´í…Œê³ ë¦¬ ë§¤í•‘ (í™ˆí˜ì´ì§€ ë¼ìš°íŒ… êµ¬ì¡° ê¸°ë°˜)
export const PAGE_CATEGORY_MAPPING = {
  '/ko/': 'hero',
  '/ko/projects': 'projects',
  '/ko/references': 'references',
  '/ko/curtain': 'curtain',
  '/ko/blind': 'blind',
  '/ko/motorized': 'motorized',
  '/ko/collection': 'collection',
  '/ko/about': 'about',
  '/ko/contact': 'contact',
  '/ko/gallery': 'gallery',
};

// ğŸ”§ ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤ (íƒ€ì… ì•ˆì „ì„± ë³´ì¥)

export function getCategoryIcon(categoryKey: string): string {
  if (!categoryKey || typeof categoryKey !== 'string') return 'ğŸ“';
  return categories[categoryKey]?.icon || 'ğŸ“';
}

export function getCategoryByKey(key: string): CategoryInfo | undefined {
  if (!key || typeof key !== 'string') return undefined;
  return categories[key];
}

export function getActiveCategoriesOnly(): Record<string, CategoryInfo> {
  return Object.fromEntries(
    Object.entries(categories).filter(([_, info]) => info.isActive)
  );
}

export function isCategoryActive(categoryKey: string): boolean {
  if (!categoryKey || typeof categoryKey !== 'string') return false;
  return categories[categoryKey]?.isActive || false;
}

export function getCategoryDisplayOrder(categoryKey: string): number {
  if (!categoryKey || typeof categoryKey !== 'string') return 999;
  return categories[categoryKey]?.displayOrder || 999;
}

export function getCategoriesByDisplayOrder(): CategoryInfo[] {
  return Object.values(categories)
    .filter((category) => category.isActive)
    .sort((a, b) => a.displayOrder - b.displayOrder);
}

export function getCategoryName(categoryKey: string): string {
  if (!categoryKey || typeof categoryKey !== 'string') return 'Unknown';
  return categories[categoryKey]?.name || categoryKey;
}

export function getCategoryDescription(categoryKey: string): string {
  if (!categoryKey || typeof categoryKey !== 'string') return '';
  return categories[categoryKey]?.description || '';
}

export function getCategoryDisplayName(categoryKey: string): string {
  if (!categoryKey || typeof categoryKey !== 'string') {
    return 'UNKNOWN';
  }
  return categories[categoryKey]?.name || categoryKey.toUpperCase();
}

// âœ… í•µì‹¬ ìˆ˜ì •: getAllActiveCategories í•¨ìˆ˜ (ë°°ì—´ ë°˜í™˜ ë³´ì¥)
export function getAllActiveCategories(): string[] {
  try {
    // MASTER_CATEGORIESê°€ ë°°ì—´ì¸ì§€ í™•ì¸
    if (!Array.isArray(MASTER_CATEGORIES)) {
      console.error('MASTER_CATEGORIES is not an array');
      return [];
    }

    // í•„í„°ë§ ê²°ê³¼ê°€ ë°°ì—´ì¸ì§€ í™•ì¸
    const result = MASTER_CATEGORIES.filter((key) => {
      if (typeof key !== 'string') return false;
      return isCategoryActive(key);
    });

    // ê²°ê³¼ê°€ ë°°ì—´ì¸ì§€ ìµœì¢… í™•ì¸
    if (!Array.isArray(result)) {
      console.error('Filter result is not an array');
      return [];
    }

    return result;
  } catch (error) {
    console.error('Error in getAllActiveCategories:', error);
    return [];
  }
}

// âœ… ì¶”ê°€: í™œì„± ì¹´í…Œê³ ë¦¬ ì •ë³´ ê°ì²´ ë°°ì—´ ë°˜í™˜ (ì»´í¬ë„ŒíŠ¸ì—ì„œ ì‚¬ìš©)
export function getActiveCategoriesInfo(): CategoryInfo[] {
  try {
    const activeKeys = getAllActiveCategories();
    const result = activeKeys
      .map((key) => categories[key])
      .filter((category) => category !== undefined);

    if (!Array.isArray(result)) {
      console.error('getActiveCategoriesInfo result is not an array');
      return [];
    }

    return result;
  } catch (error) {
    console.error('Error in getActiveCategoriesInfo:', error);
    return [];
  }
}

export function getSubcategories(parentCategory: string): string[] {
  if (!parentCategory || typeof parentCategory !== 'string') return [];
  return subcategories[parentCategory] || [];
}

export function hasSubcategories(categoryKey: string): boolean {
  if (!categoryKey || typeof categoryKey !== 'string') return false;
  return categories[categoryKey]?.hasSubcategories || false;
}

// ğŸ“Š ì¹´í…Œê³ ë¦¬ í†µê³„
export function getCategoryStats() {
  const totalCategories = Object.keys(categories).length;
  const activeCategories = Object.values(categories).filter(
    (cat) => cat.isActive
  ).length;
  const categoriesWithSubs = Object.values(categories).filter(
    (cat) => cat.hasSubcategories
  ).length;

  return {
    total: totalCategories,
    active: activeCategories,
    withSubcategories: categoriesWithSubs,
    inactive: totalCategories - activeCategories,
  };
}

export default categories;
